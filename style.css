:root {
  --bg: #0b1220; --panel:#111827; --muted:#64748b; --accent:#3b82f6; --text:#e5e7eb; --chip:#1f2937;
  --br: 16px;
}
* { box-sizing: border-box; }
body { margin:0; background:linear-gradient(180deg,#0b1220,#0f172a 60%); color:var(--text); font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,"Noto Sans Thai",sans-serif; }
.header { position:sticky; top:0; z-index:10; backdrop-filter:saturate(160%) blur(6px); background:rgba(2,6,23,.6); border-bottom:1px solid rgba(148,163,184,.15); }
.wrap { max-width:1100px; margin:0 auto; padding:16px; }
h1 { font-size:20px; margin:0 0 8px; letter-spacing:.2px; }
.bar { display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
input[type=text]{
  flex:1 1 200px; min-width:220px; padding:10px 12px; border-radius:10px; border:1px solid rgba(148,163,184,.25);
  background:#0b1220; color:var(--text); outline:none;
}
button{
  padding:10px 14px; border-radius:10px; border:1px solid transparent; background:var(--accent); color:white; cursor:pointer; font-weight:600;
}
button:disabled{ opacity:.6; cursor:not-allowed; }
.grid{ display:grid; grid-template-columns: 320px 1fr; gap:16px; margin-top:16px; }
@media (max-width: 900px){ .grid{ grid-template-columns:1fr; } }
.card{ background:var(--panel); border:1px solid rgba(148,163,184,.12); border-radius:var(--br); overflow:hidden; }
.poster{ width:100%; aspect-ratio:2/3; object-fit:cover; background:#0b1220; display:block; }
.meta{ padding:12px 14px; }
.meta h2{ margin:0 0 6px; font-size:18px; }
.muted{ color:var(--muted); font-size:14px; line-height:1.5; }
.vidwrap{ background:#000; border-radius:var(--br); overflow:hidden; border:1px solid rgba(148,163,184,.12);}
video{ width:100%; height:auto; display:block; }
.episodes{ margin-top:12px; background:var(--panel); border:1px solid rgba(148,163,184,.12); border-radius:var(--br); padding:10px; max-height:420px; overflow:auto; }
.row{ display:flex; align-items:center; gap:10px; padding:8px 10px; border-radius:10px; cursor:pointer; }
.row:hover{ background:rgba(148,163,184,.08); }
.epno{ font-variant-numeric:tabular-nums; background:var(--chip); padding:4px 8px; border-radius:8px; color:#cbd5e1; min-width:44px; text-align:center; }
.playing{ outline:2px solid var(--accent); background:rgba(59,130,246,.10); }
.status{ font-size:14px; color:#93c5fd; margin-top:8px; min-height:20px; }
.hint{ font-size:12px; color:#9ca3af; margin-left:auto; }
.footer{ text-align:center; font-size:12px; color:#93a4bd; padding:16px 0 28px; }
.err{ color:#fca5a5; }
.pill{ font-size:12px; padding:4px 8px; border:1px solid rgba(148,163,184,.28); border-radius:999px; color:#cbd5e1; }
.controls{
  margin-top:8px; display:flex; gap:8px; align-items:center; flex-wrap:wrap;
}
.controls button{
  padding:8px 12px; border-radius:10px; border:1px solid rgba(148,163,184,.25);
  background:transparent; color:#e5e7eb; cursor:pointer; font-weight:600;
}
.controls button:hover{ background:rgba(148,163,184,.10); }
.autoplay{ margin-left:auto; font-size:14px; color:#cbd5e1; display:flex; align-items:center; gap:6px; }
/* วาง vdo + episodes ข้างกัน */
.content {
  display: flex;
  gap: 16px;
  align-items: flex-start;
}

/* กล่องตอนอยู่ด้านขวา */
.episodes {
  flex: 0 0 300px;       /* กำหนดความกว้างด้านขวา */
  max-height: 600px;
  overflow-y: auto;
  background: var(--panel);
  border: 1px solid rgba(148,163,184,.12);
  border-radius: var(--br);
  padding: 10px;
  display: grid;
  grid-template-columns: repeat(3, 1fr); /* 3 คอลัมน์ */
  gap: 8px;
}

/* แถวตอนแต่ละอันเป็นการ์ดเล็ก */
.row {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 10px;
  border-radius: 10px;
  cursor: pointer;
  background: rgba(148,163,184,.05);
  text-align: center;
}
.row:hover { background: rgba(148,163,184,.12); }

.epno {
  font-variant-numeric: tabular-nums;
  background: var(--chip);
  padding: 4px 8px;
  border-radius: 8px;
  color: #cbd5e1;
  font-size: 12px;
}

.playing {
  outline: 2px solid var(--accent);
  background: rgba(59,130,246,.15);
}
/* จัดวาง video + episodes ข้างกัน */
.content {
  display: flex;
  gap: 16px;
  align-items: flex-start;
}

/* รายชื่อตอนเป็น grid 3 คอลัมน์ (โหมดเดสก์ท็อป) */
.episodes {
  flex: 0 0 360px;
  max-height: 600px;
  overflow-y: auto;
  background: var(--panel);
  border: 1px solid rgba(148,163,184,.12);
  border-radius: var(--br);
  padding: 10px;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}

/* การ์ดตอน */
.row {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 10px;
  border-radius: 10px;
  cursor: pointer;
  background: rgba(148,163,184,.05);
  text-align: center;
}
.row:hover { background: rgba(148,163,184,.12); }

.epno {
  font-variant-numeric: tabular-nums;
  background: var(--chip);
  padding: 4px 8px;
  border-radius: 8px;
  color: #cbd5e1;
  font-size: 12px;
}

.playing {
  outline: 2px solid var(--accent);
  background: rgba(59,130,246,.15);
}

/* ปุ่มลอยเปิดรายชื่อตอน (แสดงเฉพาะมือถือ) */
.episodes-toggle {
  position: fixed;
  right: 16px;
  bottom: 16px;
  z-index: 25;
  padding: 10px 14px;
  border-radius: 999px;
  border: 1px solid rgba(148,163,184,.25);
  background: var(--accent);
  color: #fff;
  font-weight: 700;
  cursor: pointer;
  display: none; /* เดสก์ท็อปซ่อน */
}

/* ฉากหลังตอนเปิด drawer */
.backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  z-index: 15;
  display: none;
}

/* ============ โหมดมือถือ ============ */
@media (max-width: 900px) {
  /* content ซ้อนกัน */
  .content { display: block; }

  /* episodes เป็น drawer สไลด์จากขวา */
  .episodes {
    position: fixed;
    top: 0;
    right: 0;
    height: 100vh;
    width: min(90vw, 420px);
    max-height: none;
    border-radius: 0;
    border-left: 1px solid rgba(148,163,184,.2);
    transform: translateX(100%);
    transition: transform .25s ease;
    z-index: 20;
    /* มือถือให้ 2 คอลัมน์เพื่อแตะง่ายขึ้น */
    grid-template-columns: repeat(2, 1fr);
  }
  .episodes.open { transform: translateX(0); }

  .episodes-toggle { display: inline-flex; align-items: center; gap: 6px; }

  .backdrop.show { display: block; }
}

/* ============ โหมดเดสก์ท็อป ============ */
@media (min-width: 901px) {
  /* เดสก์ท็อปให้ติดขวาเหมือน sidebar */
  .episodes {
    position: sticky;
    top: 80px;
    height: calc(100vh - 100px);
    transform: none !important;
  }
  .episodes-toggle { display: none !important; }
  .backdrop { display: none !important; }
}
